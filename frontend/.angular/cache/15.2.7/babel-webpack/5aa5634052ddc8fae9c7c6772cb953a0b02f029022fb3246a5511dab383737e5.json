{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet UserLoginComponent = class UserLoginComponent {\n  constructor(fb, api, router, toast) {\n    this.fb = fb;\n    this.api = api;\n    this.router = router;\n    this.toast = toast;\n    this.loading = false;\n    this.loginForm = this.fb.group({\n      email: ['', [Validators.required]],\n      password: ['', [Validators.required]]\n    });\n  }\n  onSubmit() {\n    this.loading = true;\n    if (this.loginForm.value.email && this.loginForm.value.password) {\n      this.api.userlogin(this.loginForm.value.email, this.loginForm.value.password).subscribe({\n        next: res => {\n          this.loading = false;\n          // localStorage.setItem('user_data', JSON.stringify(res));\n          localStorage.setItem('user_token', res.token);\n          this.toast.success('Login successful');\n          this.router.navigate(['/all-products']);\n        },\n        error: () => {\n          this.loading = false;\n          console.log('couldn\\'t login');\n        }\n      });\n    }\n  }\n  get email() {\n    return this.loginForm.get('email');\n  }\n  get password() {\n    return this.loginForm.get('password');\n  }\n};\nUserLoginComponent = __decorate([Component({\n  selector: 'app-user-login',\n  templateUrl: './user-login.component.html',\n  styleUrls: ['./user-login.component.css']\n})], UserLoginComponent);\nexport { UserLoginComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAuBC,UAAU,QAAQ,gBAAgB;AAUlD,IAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAC7BC,YACUC,EAAe,EACfC,GAAsB,EACtBC,MAAc,EACdC,KAAqB;IAHrB,OAAE,GAAFH,EAAE;IACF,QAAG,GAAHC,GAAG;IACH,WAAM,GAANC,MAAM;IACN,UAAK,GAALC,KAAK;IAGf,YAAO,GAAY,KAAK;IAExB,cAAS,GAAG,IAAI,CAACH,EAAE,CAACI,KAAK,CAAC;MACxBC,KAAK,EAAE,CAAC,EAAE,EAAE,CAACR,UAAU,CAACS,QAAQ,CAAC,CAAC;MAClCC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAACV,UAAU,CAACS,QAAQ,CAAC;KACrC,CAAC;EAPE;EASJE,QAAQ;IACN,IAAI,CAACC,OAAO,GAAG,IAAI;IACnB,IAAG,IAAI,CAACC,SAAS,CAACC,KAAK,CAACN,KAAK,IAAI,IAAI,CAACK,SAAS,CAACC,KAAK,CAACJ,QAAQ,EAAC;MAC7D,IAAI,CAACN,GAAG,CAACW,SAAS,CAAC,IAAI,CAACF,SAAS,CAACC,KAAK,CAACN,KAAK,EAAE,IAAI,CAACK,SAAS,CAACC,KAAK,CAACJ,QAAQ,CAAC,CAC5EM,SAAS,CAAC;QACTC,IAAI,EAAGC,GAAQ,IAAI;UACjB,IAAI,CAACN,OAAO,GAAG,KAAK;UACpB;UACAO,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEF,GAAG,CAACG,KAAK,CAAC;UAC7C,IAAI,CAACf,KAAK,CAACgB,OAAO,CAAC,kBAAkB,CAAC;UACtC,IAAI,CAACjB,MAAM,CAACkB,QAAQ,CAAC,CAAC,eAAe,CAAC,CAAC;QACzC,CAAC;QACDC,KAAK,EAAC,MAAK;UACT,IAAI,CAACZ,OAAO,GAAG,KAAK;UACpBa,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;QAChC;OACD,CAAC;;EAEN;EAEA,IAAIlB,KAAK;IACP,OAAO,IAAI,CAACK,SAAS,CAACc,GAAG,CAAC,OAAO,CAAC;EACpC;EAEA,IAAIjB,QAAQ;IACV,OAAO,IAAI,CAACG,SAAS,CAACc,GAAG,CAAC,UAAU,CAAC;EACvC;CACD;AA1CY1B,kBAAkB,eAL9BF,SAAS,CAAC;EACT6B,QAAQ,EAAE,gBAAgB;EAC1BC,WAAW,EAAE,6BAA6B;EAC1CC,SAAS,EAAE,CAAC,4BAA4B;CACzC,CAAC,GACW7B,kBAAkB,CA0C9B;SA1CYA,kBAAkB","names":["Component","Validators","UserLoginComponent","constructor","fb","api","router","toast","group","email","required","password","onSubmit","loading","loginForm","value","userlogin","subscribe","next","res","localStorage","setItem","token","success","navigate","error","console","log","get","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/leom/Desktop/openfabric-angular-test/frontend/src/app/pages/auth/user-login/user-login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormBuilder , Validators } from '@angular/forms';\nimport { AppServiceService } from 'src/app/service/app-service.service';\nimport { Router } from '@angular/router';\nimport { HotToastService } from '@ngneat/hot-toast';\n\n@Component({\n  selector: 'app-user-login',\n  templateUrl: './user-login.component.html',\n  styleUrls: ['./user-login.component.css']\n})\nexport class UserLoginComponent {\n  constructor( \n    private fb: FormBuilder,\n    private api: AppServiceService,\n    private router: Router,\n    private toast: HotToastModule\n    ){}\n\n  loading: boolean = false;\n\n  loginForm = this.fb.group({\n    email: ['', [Validators.required]],\n    password: ['', [Validators.required]],\n  });\n\n  onSubmit(){\n    this.loading = true;\n    if(this.loginForm.value.email && this.loginForm.value.password){\n      this.api.userlogin(this.loginForm.value.email, this.loginForm.value.password)\n      .subscribe({\n        next: (res: any) => {\n          this.loading = false;\n          // localStorage.setItem('user_data', JSON.stringify(res));\n          localStorage.setItem('user_token', res.token);\n          this.toast.success('Login successful')\n          this.router.navigate(['/all-products']);\n        },\n        error:() => {\n          this.loading = false\n          console.log('couldn\\'t login')\n        }\n      })\n    }\n  }\n\n  get email(){\n    return this.loginForm.get('email');\n  }\n\n  get password(){\n    return this.loginForm.get('password');\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}